---
/**
 * Ola de Calor Scenario Page - Guided Flow Template
 */
import BaseLayout from '../../../../layouts/BaseLayout.astro';
import TLDRBlock from '../../../../components/hub/TLDRBlock.astro';
import CollapsibleSection from '../../../../components/hub/CollapsibleSection.astro';
import PhaseTabs from '../../../../components/hub/PhaseTabs.tsx';
import InteractiveChecklist from '../../../../components/hub/InteractiveChecklist.tsx';
import StickyActionBar from '../../../../components/hub/StickyActionBar.tsx';
import Icon from '../../../../components/ui/Icon.astro';
import HeroImage from '../../../../components/content/HeroImage.astro';

const scenarioKey = 'ola-calor';

// Phase content
const phases = {
  antes: [
    {
      title: 'Identifica refugios climáticos',
      detail: 'Bibliotecas, centros cívicos, comerciales. Tu ayuntamiento publica listado.',
      tip: 'Guarda direcciones en el móvil antes de la ola'
    },
    {
      title: 'Revisa aire acondicionado y ventiladores',
      detail: 'Comprueba que funcionan ANTES de la ola de calor.',
      tip: null
    },
    {
      title: 'Almacena agua extra',
      detail: 'Al menos 5-6L por persona/día, más de lo normal.',
      tip: 'Congela botellas: sirven como acumuladores de frío'
    },
    {
      title: 'Planifica actividades',
      detail: 'Traslada ejercicio y tareas al exterior a primera hora o noche.',
      tip: null
    },
    {
      title: 'Compra sales de rehidratación',
      detail: 'Imprescindibles para reponer electrolitos perdidos por sudor.',
      tip: 'También sirven bebidas isotónicas'
    },
    {
      title: 'Contacta con personas vulnerables',
      detail: 'Establece rutina de llamadas con mayores o vecinos solos.',
      tip: null
    },
  ],
  durante: [
    {
      title: 'Evita salir de 12:00 a 18:00',
      detail: 'Las horas centrales son las más peligrosas.',
      tip: null
    },
    {
      title: 'Bebe aunque no tengas sed',
      detail: 'Cuando sientes sed, ya estás ligeramente deshidratado.',
      tip: 'Pon alarmas cada 30-60 min como recordatorio'
    },
    {
      title: 'Cierra persianas de día',
      detail: 'Mantén la casa oscura durante el día, abre ventanas de noche.',
      tip: null
    },
    {
      title: 'Reduce actividad física',
      detail: 'Evita ejercicio intenso. Si es necesario, madrugada.',
      tip: null
    },
    {
      title: 'Come ligero',
      detail: 'Comidas frías, frutas, ensaladas. Evita digestiones pesadas.',
      tip: 'Sandía y melón tienen mucha agua'
    },
    {
      title: 'Vigila síntomas de alarma',
      detail: 'Confusión, no sudoración, temperatura alta = emergencia 112.',
      tip: null
    },
  ],
  despues: [
    {
      title: 'Sigue hidratándote',
      detail: 'El cuerpo tarda en recuperarse. No bajes la guardia inmediatamente.',
      tip: null
    },
    {
      title: 'Repón existencias',
      detail: 'Agua, sales de rehidratación, alimentos ligeros consumidos.',
      tip: null
    },
    {
      title: 'Revisa a personas vulnerables',
      detail: 'Mayores, niños y enfermos crónicos pueden tener efectos retardados.',
      tip: null
    },
    {
      title: 'Documenta si hay daños',
      detail: 'Electrodomésticos dañados por calor extremo o falta de AC.',
      tip: null
    },
  ],
};

// Heat risks for warning section
const heatRisks = [
  { condition: 'Golpe de calor', symptoms: 'Temp >40°C, piel seca, confusión', action: 'EMERGENCIA 112', severity: 'critical' },
  { condition: 'Agotamiento', symptoms: 'Sudoración excesiva, debilidad, náuseas', action: 'Lugar fresco, hidratar', severity: 'warning' },
];

// Checklist categories
const checklistCategories = [
  {
    id: 'hidratacion',
    name: 'Hidratación',
    icon: 'droplet',
    items: [
      { id: 'agua-extra', name: 'Agua embotellada extra', quantity: '5-6L/persona/día', priority: 'critical' as const, notes: 'Más de lo normal por el calor' },
      { id: 'sales-rehidratacion', name: 'Sales de rehidratación oral', quantity: '10+ sobres', priority: 'critical' as const, notes: 'Reponen electrolitos perdidos' },
      { id: 'bebidas-isotonicas', name: 'Bebidas isotónicas', quantity: '6-12 unidades', priority: 'recommended' as const, notes: 'Alternativa a las sales' },
      { id: 'botellas-reutilizables', name: 'Botellas reutilizables', quantity: '1 por persona', priority: 'recommended' as const, notes: 'Para llevar agua siempre' },
    ]
  },
  {
    id: 'refrigeracion',
    name: 'Refrigeración',
    icon: 'snowflake',
    items: [
      { id: 'ventilador-pilas', name: 'Ventilador de pilas/USB', quantity: '1-2 unidades', priority: 'recommended' as const, notes: 'Funciona sin electricidad' },
      { id: 'toallas-microfibra', name: 'Toallas de microfibra', quantity: '2 por persona', priority: 'critical' as const, notes: 'Para mojar y refrescarse' },
      { id: 'pulverizador', name: 'Pulverizador de agua', quantity: '1-2 unidades', priority: 'recommended' as const, notes: 'Rociar + ventilador = eficaz' },
      { id: 'acumuladores-frio', name: 'Acumuladores de frío', quantity: '4-6 unidades', priority: 'critical' as const, notes: 'Congelar previamente' },
      { id: 'nevera-portatil', name: 'Nevera portátil', quantity: '1 unidad', priority: 'recommended' as const, notes: 'Para bebidas y compresas frías' },
    ]
  },
  {
    id: 'proteccion',
    name: 'Protección solar',
    icon: 'sun',
    items: [
      { id: 'protector-solar', name: 'Protector solar SPF50+', quantity: '1 bote grande', priority: 'critical' as const, notes: 'Reaplicar cada 2 horas' },
      { id: 'sombrero', name: 'Sombrero de ala ancha', quantity: '1 por persona', priority: 'critical' as const, notes: 'Protege cara y cuello' },
      { id: 'gafas-sol', name: 'Gafas de sol', quantity: '1 por persona', priority: 'recommended' as const, notes: 'Protegen los ojos' },
      { id: 'ropa-clara', name: 'Ropa clara y holgada', quantity: '2-3 mudas', priority: 'recommended' as const, notes: 'Transpirable, colores claros' },
    ]
  },
  {
    id: 'monitorizacion',
    name: 'Monitorización',
    icon: 'thermometer',
    items: [
      { id: 'termometro-corporal', name: 'Termómetro corporal', quantity: '1 unidad', priority: 'critical' as const, notes: 'Detectar fiebre/golpe de calor' },
      { id: 'termometro-ambiental', name: 'Termómetro ambiental', quantity: '1 unidad', priority: 'recommended' as const, notes: 'Saber cuándo ventilar' },
      { id: 'radio-pilas', name: 'Radio con pilas', quantity: '1 unidad', priority: 'recommended' as const, notes: 'Avisos de AEMET' },
    ]
  },
];

// Risk groups
const riskGroups = [
  { group: 'Mayores (+65)', icon: 'Users', tip: 'Llamar/visitar a diario, insistir en que beban' },
  { group: 'Bebés y niños', icon: 'Baby', tip: 'NUNCA en coche aparcado, hidratación frecuente' },
  { group: 'Enfermos crónicos', icon: 'Heart', tip: 'Revisar medicación, plan de emergencia' },
  { group: 'Trabajadores exterior', icon: 'HardHat', tip: 'Pausas cada 20 min, evitar 12-18h' },
];

// FAQs
const faqs = [
  {
    question: '¿A partir de qué temperatura se considera ola de calor?',
    answer: 'En España, AEMET activa avisos cuando se superan los umbrales de cada zona durante 3+ días. Generalmente, máximas >38-40°C con mínimas >20-22°C.'
  },
  {
    question: '¿Por qué es peligroso el calor nocturno?',
    answer: 'El cuerpo necesita las noches frescas para recuperarse. Si no baja de 20-22°C, el cuerpo acumula estrés térmico.'
  },
  {
    question: '¿El ventilador puede ser peligroso con mucho calor?',
    answer: 'A partir de 35°C, un ventilador solo mueve aire caliente. Pero si mojas la piel o usas toallas húmedas, sí ayuda acelerando la evaporación.'
  },
  {
    question: '¿Cuánta agua debo beber?',
    answer: 'En calor extremo: 3-4 litros diarios para adultos sedentarios, más si haces actividad física. Bebe pequeñas cantidades frecuentemente.'
  },
  {
    question: '¿Qué hago si no tengo aire acondicionado?',
    answer: 'Busca refugios climáticos (bibliotecas, centros comerciales). En casa: persianas cerradas de día, ventiladores con toallas húmedas, reduce actividad.'
  },
];
---

<BaseLayout
  title="Ola de Calor: Cómo sobrevivir al calor extremo — Checklist"
  description="Guía paso a paso para sobrevivir olas de calor extremo. Hidratación, refrigeración, grupos de riesgo y checklist interactivo."
  schemaType="HowTo"
  dateModified="2025-12-15"
  schemaData={{
    step: [
      { '@type': 'HowToStep', name: 'Identifica refugios climáticos', text: 'Bibliotecas, centros cívicos, comerciales. Tu ayuntamiento publica listado. Guarda direcciones en el móvil antes de la ola.' },
      { '@type': 'HowToStep', name: 'Revisa aire acondicionado y ventiladores', text: 'Comprueba que funcionan ANTES de la ola de calor.' },
      { '@type': 'HowToStep', name: 'Almacena agua extra', text: 'Al menos 5-6L por persona/día, más de lo normal. Congela botellas: sirven como acumuladores de frío.' },
      { '@type': 'HowToStep', name: 'Compra sales de rehidratación', text: 'Imprescindibles para reponer electrolitos perdidos por sudor. También sirven bebidas isotónicas.' },
      { '@type': 'HowToStep', name: 'Evita salir de 12:00 a 18:00', text: 'Las horas centrales son las más peligrosas.' },
      { '@type': 'HowToStep', name: 'Bebe aunque no tengas sed', text: 'Cuando sientes sed, ya estás ligeramente deshidratado. Pon alarmas cada 30-60 min como recordatorio.' },
      { '@type': 'HowToStep', name: 'Vigila síntomas de alarma', text: 'Confusión, no sudoración, temperatura alta = emergencia 112.' },
    ],
    totalTime: 'P3D',
    supply: [
      { '@type': 'HowToSupply', name: 'Agua embotellada extra (5-6L/persona/día)' },
      { '@type': 'HowToSupply', name: 'Sales de rehidratación oral' },
      { '@type': 'HowToSupply', name: 'Ventilador de pilas/USB' },
      { '@type': 'HowToSupply', name: 'Toallas de microfibra para mojar' },
      { '@type': 'HowToSupply', name: 'Protector solar SPF50+' },
      { '@type': 'HowToSupply', name: 'Termómetro corporal' },
    ],
  }}
  faqData={faqs}
>
  <main class="scenario-page">
    <!-- Header -->
    <header class="scenario-header">
      <nav class="scenario-breadcrumb">
        <a href="/es/" class="breadcrumb-back">
          <Icon name="ChevronLeft" size={20} />
        </a>
        <span class="breadcrumb-current">Ola de Calor</span>
      </nav>

      <div class="scenario-title-row">
        <div class="scenario-icon scenario-icon--orange">
          <Icon name="Sun" size={28} />
        </div>
        <div class="scenario-title-content">
          <h1 class="scenario-title">Prepararse para una Ola de Calor</h1>
          <div class="scenario-meta">
            <span class="meta-item">7 min</span>
            <span class="meta-divider">·</span>
            <span class="meta-item">Actualizado dic 2025</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Hero Image -->
    <section class="scenario-section">
      <HeroImage
        src="/images/shared/heat-wave-sun.webp"
        alt="Calor extremo y sol durante una ola de calor"
        priority={true}
      />
    </section>

    <!-- TL;DR -->
    <section class="scenario-section">
      <TLDRBlock
        summary="Las olas de calor causan más muertes que cualquier otro fenómeno meteorológico en España. La clave es hidratación constante, evitar el sol en horas centrales, y reconocer los síntomas de golpe de calor."
        keyStat="3-4 litros/día"
        keyStatLabel="Bebe mínimo"
      />
    </section>

    <!-- Phase Tabs -->
    <PhaseTabs client:idle scenarioKey={scenarioKey} />

    <!-- Phase: Antes -->
    <section id="antes" class="phase-section">
      <div class="phase-header">
        <span class="phase-number">1</span>
        <div class="phase-title-group">
          <h2 class="phase-title">Antes de la ola de calor</h2>
          <p class="phase-subtitle">Preparación preventiva</p>
        </div>
      </div>

      <div class="phase-steps">
        {phases.antes.map((step, index) => (
          <CollapsibleSection
            title={step.title}
            summary={step.detail}
            step={index + 1}
            variant="card"
          >
            <p>{step.detail}</p>
            {step.tip && (
              <div class="step-tip">
                <Icon name="Lightbulb" size={16} />
                <span>{step.tip}</span>
              </div>
            )}
          </CollapsibleSection>
        ))}
      </div>
    </section>

    <!-- Phase: Durante -->
    <section id="durante" class="phase-section">
      <div class="phase-header">
        <span class="phase-number phase-number--warning">2</span>
        <div class="phase-title-group">
          <h2 class="phase-title">Durante la ola de calor</h2>
          <p class="phase-subtitle">Supervivencia al calor extremo</p>
        </div>
      </div>

      <!-- Warning Box -->
      <div class="warning-box">
        <div class="warning-icon">
          <Icon name="AlertTriangle" size={24} />
        </div>
        <div class="warning-content">
          <strong>Señales de emergencia</strong>
          <ul>
            {heatRisks.map((risk) => (
              <li>
                <strong class={risk.severity === 'critical' ? 'text-red' : ''}>{risk.condition}:</strong> {risk.symptoms} → {risk.action}
              </li>
            ))}
          </ul>
        </div>
      </div>

      <div class="phase-steps">
        {phases.durante.map((step, index) => (
          <CollapsibleSection
            title={step.title}
            summary={step.detail}
            step={index + 1}
            variant="card"
          >
            <p>{step.detail}</p>
            {step.tip && (
              <div class="step-tip">
                <Icon name="Lightbulb" size={16} />
                <span>{step.tip}</span>
              </div>
            )}
          </CollapsibleSection>
        ))}
      </div>
    </section>

    <!-- Phase: Después -->
    <section id="despues" class="phase-section">
      <div class="phase-header">
        <span class="phase-number phase-number--success">3</span>
        <div class="phase-title-group">
          <h2 class="phase-title">Después de la ola de calor</h2>
          <p class="phase-subtitle">Recuperación</p>
        </div>
      </div>

      <div class="phase-steps">
        {phases.despues.map((step, index) => (
          <CollapsibleSection
            title={step.title}
            summary={step.detail}
            step={index + 1}
            variant="card"
          >
            <p>{step.detail}</p>
            {step.tip && (
              <div class="step-tip">
                <Icon name="Lightbulb" size={16} />
                <span>{step.tip}</span>
              </div>
            )}
          </CollapsibleSection>
        ))}
      </div>
    </section>

    <!-- Risk Groups -->
    <section class="scenario-section">
      <h2 class="section-title">Grupos de riesgo</h2>
      <div class="risk-groups-grid">
        {riskGroups.map((group) => (
          <div class="risk-group-card">
            <div class="risk-group-icon">
              <Icon name={group.icon as any} size={20} />
            </div>
            <div class="risk-group-content">
              <h3 class="risk-group-title">{group.group}</h3>
              <p class="risk-group-tip">{group.tip}</p>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- Interactive Checklist -->
    <section class="scenario-section">
      <h2 class="section-title">
        <Icon name="CheckSquare" size={24} />
        Tu checklist de ola de calor
      </h2>
      <p class="section-intro">
        Marca los items que ya tienes. Tu progreso se guarda automáticamente.
      </p>
      <InteractiveChecklist
        client:idle
        storageKey={scenarioKey}
        categories={checklistCategories}
        title="Items para olas de calor"
      />
    </section>

    <!-- FAQs -->
    <section class="scenario-section">
      <h2 class="section-title">Preguntas frecuentes</h2>
      <div class="faq-list">
        {faqs.map((faq) => (
          <details class="faq-item">
            <summary class="faq-question">
              <span>{faq.question}</span>
              <Icon name="ChevronDown" size={20} />
            </summary>
            <div class="faq-answer">
              <p>{faq.answer}</p>
            </div>
          </details>
        ))}
      </div>
    </section>

    <!-- Sources -->
    <section class="scenario-section">
      <details class="sources-block">
        <summary class="sources-header">
          <Icon name="BookOpen" size={18} />
          <span>Ver fuentes y referencias</span>
          <Icon name="ChevronDown" size={16} />
        </summary>
        <div class="sources-content">
          <ul>
            <li><a href="https://www.aemet.es/" target="_blank" rel="noopener">AEMET</a></li>
            <li><a href="https://www.mscbs.gob.es/" target="_blank" rel="noopener">Ministerio de Sanidad</a></li>
            <li><a href="https://www.who.int/news-room/fact-sheets/detail/climate-change-heat-and-health" target="_blank" rel="noopener">OMS - Heat and Health</a></li>
          </ul>
        </div>
      </details>
    </section>

    <!-- Related Scenarios -->
    <section class="scenario-section">
      <h2 class="section-title">Escenarios relacionados</h2>
      <div class="related-grid">
        <a href="/es/escenarios/prepararse-apagon/" class="related-card related-card--amber">
          <Icon name="Zap" size={24} />
          <span>Apagón</span>
        </a>
        <a href="/es/escenarios/prepararse-corte-agua/" class="related-card related-card--blue">
          <Icon name="Droplet" size={24} />
          <span>Corte de Agua</span>
        </a>
      </div>
    </section>
  </main>

  <!-- Sticky Action Bar -->
  <StickyActionBar
    client:idle
    actionText="Calcular agua"
    actionUrl="/es/herramientas/calculadora-agua/"
    dismissKey={`scenario_${scenarioKey}`}
    label="Próximo paso:"
  />
</BaseLayout>

<style>
  .scenario-page {
    max-width: 720px;
    margin: 0 auto;
    padding: 0 16px 120px;
  }

  .scenario-header {
    padding: 16px 0 24px;
  }

  .scenario-breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
  }

  .breadcrumb-back {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: var(--color-bg-secondary);
    border-radius: 10px;
    color: var(--color-text-secondary);
    transition: all 0.15s ease;
  }

  .breadcrumb-back:hover {
    background: var(--color-bg-tertiary);
    color: var(--color-text-primary);
  }

  .breadcrumb-current {
    font-size: 14px;
    color: var(--color-text-muted);
  }

  .scenario-title-row {
    display: flex;
    align-items: flex-start;
    gap: 16px;
  }

  .scenario-icon {
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 16px;
  }

  .scenario-icon--orange {
    background: rgba(249, 115, 22, 0.15);
    color: #f97316;
  }

  .scenario-title-content {
    flex: 1;
    min-width: 0;
  }

  .scenario-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin: 0 0 6px;
    line-height: 1.2;
  }

  .scenario-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--color-text-muted);
  }

  .meta-divider {
    opacity: 0.5;
  }

  .scenario-section {
    margin-bottom: 32px;
  }

  .section-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin: 0 0 12px;
  }

  .section-intro {
    font-size: 14px;
    color: var(--color-text-muted);
    margin: 0 0 16px;
  }

  .phase-section {
    padding: 24px 0;
    border-bottom: 1px solid var(--color-border);
  }

  .phase-section:last-of-type {
    border-bottom: none;
  }

  .phase-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 20px;
  }

  .phase-number {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-accent-subtle);
    color: var(--color-accent-primary);
    font-size: 18px;
    font-weight: 700;
    border-radius: 12px;
  }

  .phase-number--warning {
    background: rgba(249, 115, 22, 0.15);
    color: #f97316;
  }

  .phase-number--success {
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
  }

  .phase-title-group {
    flex: 1;
    min-width: 0;
  }

  .phase-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin: 0 0 4px;
  }

  .phase-subtitle {
    font-size: 14px;
    color: var(--color-text-muted);
    margin: 0;
  }

  .phase-steps {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .step-tip {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    margin-top: 12px;
    padding: 10px 12px;
    background: var(--color-accent-subtle);
    border-radius: 8px;
    font-size: 13px;
    color: var(--color-accent-primary);
  }

  .step-tip svg {
    flex-shrink: 0;
    margin-top: 1px;
  }

  .warning-box {
    display: flex;
    gap: 16px;
    padding: 16px;
    margin-bottom: 20px;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 12px;
  }

  .warning-icon {
    flex-shrink: 0;
    color: #ef4444;
  }

  .warning-content {
    flex: 1;
    min-width: 0;
  }

  .warning-content strong {
    display: block;
    font-size: 14px;
    color: #ef4444;
    margin-bottom: 8px;
  }

  .warning-content ul {
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .warning-content li {
    font-size: 13px;
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin-bottom: 4px;
  }

  .warning-content .text-red {
    color: #ef4444;
  }

  /* Risk Groups */
  .risk-groups-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }

  .risk-group-card {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
  }

  .risk-group-icon {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(249, 115, 22, 0.1);
    color: #f97316;
    border-radius: 10px;
  }

  .risk-group-content {
    flex: 1;
    min-width: 0;
  }

  .risk-group-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--color-text-primary);
    margin: 0 0 4px;
  }

  .risk-group-tip {
    font-size: 12px;
    color: var(--color-text-muted);
    line-height: 1.4;
    margin: 0;
  }

  /* FAQs */
  .faq-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .faq-item {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    overflow: hidden;
  }

  .faq-question {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 14px 16px;
    font-size: 14px;
    font-weight: 500;
    color: var(--color-text-primary);
    cursor: pointer;
    list-style: none;
  }

  .faq-question::-webkit-details-marker {
    display: none;
  }

  .faq-question svg {
    flex-shrink: 0;
    color: var(--color-text-muted);
    transition: transform 0.2s ease;
  }

  .faq-item[open] .faq-question svg {
    transform: rotate(180deg);
  }

  .faq-answer {
    padding: 0 16px 14px;
  }

  .faq-answer p {
    font-size: 14px;
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin: 0;
  }

  /* Sources */
  .sources-block {
    background: var(--color-bg-secondary);
    border-radius: 12px;
    overflow: hidden;
  }

  .sources-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 16px;
    font-size: 14px;
    color: var(--color-text-muted);
    cursor: pointer;
    list-style: none;
  }

  .sources-header::-webkit-details-marker {
    display: none;
  }

  .sources-header svg:last-child {
    margin-left: auto;
    transition: transform 0.2s ease;
  }

  .sources-block[open] .sources-header svg:last-child {
    transform: rotate(180deg);
  }

  .sources-content {
    padding: 0 16px 14px;
  }

  .sources-content ul {
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .sources-content li {
    margin-bottom: 8px;
  }

  .sources-content a {
    font-size: 13px;
    color: var(--color-accent-primary);
    text-decoration: none;
  }

  .sources-content a:hover {
    text-decoration: underline;
  }

  /* Related Scenarios */
  .related-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }

  .related-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    border-radius: 12px;
    text-decoration: none;
    transition: transform 0.15s ease;
  }

  .related-card:hover {
    transform: translateY(-2px);
  }

  .related-card span {
    font-size: 14px;
    font-weight: 600;
    color: var(--color-text-primary);
  }

  .related-card--amber {
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.2);
    color: #f59e0b;
  }

  .related-card--blue {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    color: #3b82f6;
  }

  @media (max-width: 480px) {
    .scenario-page {
      padding: 0 12px 120px;
    }

    .scenario-title {
      font-size: 1.25rem;
    }

    .risk-groups-grid {
      grid-template-columns: 1fr;
    }

    .related-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
